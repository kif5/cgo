mixed-port: 7890
socks-port: 1080
port: 8080
mode: rule
allow-lan: true
bind-address: '*'
log-level: warning
ipv6: true
tcp-concurrent: true
profile:
  store-selected: true
  store-fake-ip: true
keep-alive-idle: 30
keep-alive-interval: 30
disable-keep-alive: false
external-controller: 0.0.0.0:9090
secret: hd54RIm0LiUpyu
external-ui: ./ui
external-ui-name: zashboard
external-ui-url: https://ghfast.top/https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip
global-client-fingerprint: random
global-ua: mihomo
etag-support: true
geodata-mode: true
geodata-loader: standard
geo-auto-update: true
geo-update-interval: 24
geox-url:
  geoip: https://ghfast.top/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat
  geosite: https://ghfast.top/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat
  mmdb: https://ghfast.top/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country.mmdb
  asn: https://ghfast.top/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb
public-dns: &id002
- dhcp://wan
- dhcp://eth1
- 223.5.5.5
secure-dns: &id001
- https://223.5.5.5/dns-query#h3=true
dns:
  enable: true
  listen: 0.0.0.0:1053
  enhanced-mode: fake-ip
  cache-algorithm: lru
  prefer-h3: true
  ipv6: true
  use-hosts: true
  use-system-hosts: true
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
  - rule-set:ğŸŒDirect-FISH
  - geosite:category-ads-all
  - geosite:cn
  - geosite:geolocation-cn
  - geosite:private
  - geosite:apple
  - geosite:win-extra
  - geosite:win-update
  - geosite:tailscale
  - geosite:tracker,category-pt
  - geosite:synology
  - geosite:category-ntp
  default-nameserver: *id001
  proxy-server-nameserver: *id001
  direct-nameserver: *id002
  nameserver-policy:
    geosite:category-ads-all: rcode://success
  nameserver: *id002
hosts:
  mihomo.mihomo: 127.0.0.1
sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: true
  sniff:
    TLS:
      ports:
      - 443
      - 8443
    HTTP:
      ports:
      - 80
      - 8080-8880
    QUIC:
      ports:
      - 443
      - 8443
  force-domain:
  - +.netflix.com
  - +.nflxvideo.net
  - +.amazonaws.com
  - +.media.dssott.com
  skip-domain:
  - +.apple.com
  - Mijia Cloud
  - dlg.io.mi.com
  - +.oray.com
  - +.sunlogin.net
  - geosite:cn
tun:
  enable: true
  stack: mixed
  device: utun0
  auto-route: true
  auto-detect-interface: true
  dns-hijack:
  - any:53
  - tcp://any:53
  mtu: 9000
  gso: true
  gso-max-size: 65536
  exclude-package:
  - com.tencent.mobileqq
  - com.tencent.mm
  - com.tencent.androidqqmail
  - com.xingin.xhs
  - idm.internet.download.manager
  - com.sausage.download
  - com.eg.android.AlipayGphone
  - com.sgcc.wsgw.cn
  - com.taobao.taobao
  - com.jingdong.app.mall
  - com.MobileTicket
  - com.chinamworld.main
  - com.jd.jrapp
proxy-providers-general:
  type: http
  interval: 86400
  proxy: DIRECT
  size-limit: 0
  exclude-filter: (?i)å®˜ç½‘|æ¯æœˆåˆ·æ–°è®¢é˜…|æœºåœº|åˆ°æœŸ|https://|å‰©ä½™æµé‡
  override:
    tfo: false
    mptcp: false
    udp: true
    udp-over-tcp: false
    skip-cert-verify: false
    ip-version: dual
proxy-providers: null
use-all-proxy-providers:
  use: null
health-check-general:
  use: null
  url: http://www.gstatic.com/generate_204
  interval: 30
  tolerance: 200
  lazy: true
  timeout: 5000
  max-failed-times: 5
default-proxy:
  proxies: &id004
  - âœ…é»˜è®¤ä»£ç†
  - â™»ï¸å»¶è¿Ÿæœ€ä½
  - âš ï¸æ•…éšœåˆ‡æ¢
  - ğŸ–ï¸æ‰‹åŠ¨åˆ‡æ¢
  - ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹
  - ğŸ‡¨ğŸ‡³å°æ¹¾èŠ‚ç‚¹
  - ğŸ‡¸ğŸ‡¬ç‹®åŸèŠ‚ç‚¹
  - ğŸ‡¯ğŸ‡µæ—¥æœ¬èŠ‚ç‚¹
  - ğŸ‡ºğŸ‡²ç¾å›½èŠ‚ç‚¹
  - DIRECT
default-direct:
  proxies: &id003
  - DIRECT
  - âœ…é»˜è®¤ä»£ç†
  - â™»ï¸å»¶è¿Ÿæœ€ä½
  - âš ï¸æ•…éšœåˆ‡æ¢
  - ğŸ–ï¸æ‰‹åŠ¨åˆ‡æ¢
  - ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹
  - ğŸ‡¨ğŸ‡³å°æ¹¾èŠ‚ç‚¹
  - ğŸ‡¸ğŸ‡¬ç‹®åŸèŠ‚ç‚¹
  - ğŸ‡¯ğŸ‡µæ—¥æœ¬èŠ‚ç‚¹
  - ğŸ‡ºğŸ‡²ç¾å›½èŠ‚ç‚¹
proxy-groups:
- use: null
  url: http://www.gstatic.com/generate_204
  interval: 30
  tolerance: 200
  lazy: true
  timeout: 5000
  max-failed-times: 5
  name: â™»ï¸å»¶è¿Ÿæœ€ä½
  type: url-test
  proxies:
  - DIRECT
- use: null
  url: http://www.gstatic.com/generate_204
  interval: 30
  tolerance: 200
  lazy: true
  timeout: 5000
  max-failed-times: 5
  name: âš ï¸æ•…éšœåˆ‡æ¢
  type: fallback
  proxies:
  - DIRECT
- use: null
  name: ğŸ–ï¸æ‰‹åŠ¨åˆ‡æ¢
  type: select
  proxies:
  - DIRECT
- name: âœ…é»˜è®¤ä»£ç†
  type: select
  proxies:
  - â™»ï¸å»¶è¿Ÿæœ€ä½
  - âš ï¸æ•…éšœåˆ‡æ¢
  - ğŸ–ï¸æ‰‹åŠ¨åˆ‡æ¢
  - ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹
  - ğŸ‡¨ğŸ‡³å°æ¹¾èŠ‚ç‚¹
  - ğŸ‡¸ğŸ‡¬ç‹®åŸèŠ‚ç‚¹
  - ğŸ‡¯ğŸ‡µæ—¥æœ¬èŠ‚ç‚¹
  - ğŸ‡ºğŸ‡²ç¾å›½èŠ‚ç‚¹
  - DIRECT
- proxies: *id003
  name: ğŸŒé»˜è®¤ç›´è¿
  type: select
- proxies: *id003
  name: ğŸŸæ¼ç½‘ä¹‹é±¼
  type: select
- proxies: *id004
  name: â“‚ï¸å¾®è½¯Copilot
  type: select
  icon: https://ghfast.top/https://github.com/refined-fish/clash_rule_fish/blob/main/Icons/Microsoft_365_Copilot.png
- proxies: *id004
  name: â£OpenAi
  type: select
  icon: https://ghfast.top/https://github.com/refined-fish/clash_rule_fish/blob/main/Icons/Chat_GPT.png
- proxies: *id004
  name: âœˆï¸Telegram
  type: select
  icon: https://ghfast.top/https://github.com/refined-fish/clash_rule_fish/blob/main/Icons/Telegram.png
- proxies: *id004
  name: ğŸ§±GFW
  type: select
  icon: https://ghfast.top/https://github.com/refined-fish/clash_rule_fish/blob/main/Icons/GFW.png
- name: ğŸ“ºå·´å“ˆå§†ç‰¹
  type: select
  proxies:
  - ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹
  - ğŸ‡¨ğŸ‡³å°æ¹¾èŠ‚ç‚¹
  icon: https://ghfast.top/https://github.com/refined-fish/clash_rule_fish/blob/main/Icons/å·´å“ˆå§†ç‰¹.png
- proxies: *id003
  name: ğŸ®Steam
  type: select
  icon: https://ghfast.top/https://github.com/refined-fish/clash_rule_fish/blob/main/Icons/Steam.png
- proxies: *id003
  name: â“‚ï¸å¾®è½¯æœåŠ¡
  type: select
  icon: https://ghfast.top/https://github.com/refined-fish/clash_rule_fish/blob/main/Icons/Microsoft.png
- use: null
  url: http://www.gstatic.com/generate_204
  interval: 30
  tolerance: 200
  lazy: true
  timeout: 5000
  max-failed-times: 5
  name: ğŸ‡­ğŸ‡°é¦™æ¸¯èŠ‚ç‚¹
  type: url-test
  filter: æ¸¯|HK|hk|Hong Kong|HongKong|hongkong
  proxies:
  - DIRECT
- use: null
  url: http://www.gstatic.com/generate_204
  interval: 30
  tolerance: 200
  lazy: true
  timeout: 5000
  max-failed-times: 5
  name: ğŸ‡¯ğŸ‡µæ—¥æœ¬èŠ‚ç‚¹
  type: url-test
  filter: æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|JP|Japan
  proxies:
  - DIRECT
- use: null
  url: http://www.gstatic.com/generate_204
  interval: 30
  tolerance: 200
  lazy: true
  timeout: 5000
  max-failed-times: 5
  name: ğŸ‡ºğŸ‡²ç¾å›½èŠ‚ç‚¹
  type: url-test
  filter: ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States
  proxies:
  - DIRECT
- use: null
  url: http://www.gstatic.com/generate_204
  interval: 30
  tolerance: 200
  lazy: true
  timeout: 5000
  max-failed-times: 5
  name: ğŸ‡¨ğŸ‡³å°æ¹¾èŠ‚ç‚¹
  type: url-test
  filter: å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan
  proxies:
  - DIRECT
- use: null
  url: http://www.gstatic.com/generate_204
  interval: 30
  tolerance: 200
  lazy: true
  timeout: 5000
  max-failed-times: 5
  name: ğŸ‡¸ğŸ‡¬ç‹®åŸèŠ‚ç‚¹
  type: url-test
  filter: æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore
  proxies:
  - DIRECT
- name: AUTO
  type: select
  proxies:
  - DIRECT
rule-providers-general:
  type: http
  behavior: classical
  interval: 86400
rule-providers:
  â™»ï¸å»¶è¿Ÿæœ€ä½-FISH:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.githubusercontent.com/refined-fish/clash_rule_fish/refs/heads/main/Ruleset/â™»ï¸å»¶è¿Ÿæœ€ä½-FISH.yaml
    path: ./providers/rule/rule-provider_â™»ï¸å»¶è¿Ÿæœ€ä½-FISH.yaml
  ğŸŒDirect-FISH:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.githubusercontent.com/refined-fish/clash_rule_fish/refs/heads/main/Ruleset/ğŸŒDirect-FISH.yaml
    path: ./providers/rule/rule-provider_ğŸŒDirect-FISH.yaml
  â“‚ï¸å¾®è½¯Copilot-FISH:
    type: http
    behavior: classical
    interval: 86400
    url: https://raw.githubusercontent.com/refined-fish/clash_rule_fish/refs/heads/main/Ruleset/â“‚ï¸å¾®è½¯Copilot-FISH.yaml
    path: ./providers/rule/rule-provider_â“‚ï¸å¾®è½¯Copilot-FISH.yaml
rules:
- RULE-SET,â™»ï¸å»¶è¿Ÿæœ€ä½-FISH,âœ…é»˜è®¤ä»£ç†
- RULE-SET,ğŸŒDirect-FISH,ğŸŒé»˜è®¤ç›´è¿
- GEOIP,private,DIRECT,no-resolve
- GEOSITE,private,DIRECT
- GEOSITE,tailscale,DIRECT
- GEOSITE,tracker,DIRECT
- GEOSITE,category-pt,DIRECT
- GEOSITE,tmdb,âœ…é»˜è®¤ä»£ç†
- GEOSITE,win-extra,â“‚ï¸å¾®è½¯æœåŠ¡
- GEOSITE,win-update,â“‚ï¸å¾®è½¯æœåŠ¡
- RULE-SET,â“‚ï¸å¾®è½¯Copilot-FISH,â“‚ï¸å¾®è½¯Copilot
- GEOSITE,synology,ğŸŒé»˜è®¤ç›´è¿
- GEOSITE,openai,â£OpenAi
- GEOSITE,telegram,âœˆï¸Telegram
- GEOIP,telegram,âœˆï¸Telegram,no-resolve
- GEOSITE,category-container,âœ…é»˜è®¤ä»£ç†
- GEOSITE,python,âœ…é»˜è®¤ä»£ç†
- GEOSITE,bahamut,ğŸ“ºå·´å“ˆå§†ç‰¹
- GEOSITE,category-porn,âœ…é»˜è®¤ä»£ç†
- GEOSITE,gfw,ğŸ§±GFW
- GEOSITE,microsoft,â“‚ï¸å¾®è½¯æœåŠ¡
- GEOSITE,steam,ğŸ®Steam
- GEOSITE,cn,ğŸŒé»˜è®¤ç›´è¿
- GEOIP,cn,ğŸŒé»˜è®¤ç›´è¿,no-resolve
- MATCH,ğŸŸæ¼ç½‘ä¹‹é±¼
proxies: []
